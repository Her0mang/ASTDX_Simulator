<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simulador de Summons</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #1c1c1c;
        color: white;
        text-align: center;
        padding: 20px;
    }
    h1 { color: gold; margin-bottom: 10px; }
    .btn {
        padding: 10px 20px;
        margin: 5px;
        font-size: 16px;
        cursor: pointer;
        border: none;
        border-radius: 8px;
        transition: 0.2s;
    }
    .bannerX { background-color: crimson; color: white; }
    .bannerY { background-color: royalblue; color: white; }
    .start { background-color: limegreen; color: black; font-weight: bold; }
    .reset { background-color: orange; color: black; font-weight: bold; }
    .btn:hover { transform: scale(1.05); opacity: 0.9; }
    input {
        padding: 8px;
        margin: 5px;
        font-size: 16px;
        border-radius: 5px;
        border: none;
        text-align: center;
    }
    #resultado { margin-top: 20px; text-align: center; }
    .card {
        display: inline-block;
        margin: 5px;
        padding: 10px;
        border-radius: 10px;
        background-color: #2a2a2a;
        width: 120px;
        text-align: center;
        position: relative;
    }
    .card img { width: 100px; border-radius: 8px; }
    .Unbound { border: 3px solid gold; animation: pulse 1s infinite; }
    .Shiny { border: 3px solid cyan; animation: shinyGlow 1s infinite; }
    .five { border: 3px solid orange; }
    .four { border: 3px solid violet; }
    .three { border: 3px solid gray; }
    @keyframes pulse {
        0% { box-shadow: 0 0 10px gold; }
        50% { box-shadow: 0 0 30px gold; }
        100% { box-shadow: 0 0 10px gold; }
    }
    @keyframes shinyGlow {
        0% { box-shadow: 0 0 10px cyan; }
        50% { box-shadow: 0 0 30px cyan; }
        100% { box-shadow: 0 0 10px cyan; }
    }
    #animacao {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255,215,0,0.2) 0%, rgba(0,0,0,0.95) 80%);
        z-index: 9999;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        color: white;
        font-size: 24px;
    }
    .spin {
        width: 120px;
        height: 120px;
        border: 10px solid rgba(255,255,255,0.2);
        border-top: 10px solid gold;
        border-radius: 50%;
        animation: girar 1s linear infinite;
    }
    @keyframes girar {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
</head>
<body>

<h1>ðŸŽ¯ Simulador de Summons</h1>

<h3>Escolha o Banner:</h3>
<button class="btn bannerX" onclick="escolherBanner('X')">Banner X (Kokushibo)</button>
<button class="btn bannerY" onclick="escolherBanner('Y')">Banner Y (Chrollo)</button>

<p>Gemas: <input type="number" id="gemas" value="1000" min="50"></p>
<p><strong>ðŸ’Ž Gemas Gastas:</strong> <span id="contadorGemas">0</span></p>

<button class="btn start" onclick="iniciarSimulacao()">ðŸŽ² Rodar SimulaÃ§Ã£o</button>
<button class="btn" id="btnContinuar" onclick="continuarGiros()" style="display:none; background:#0099ff; color:white;">ðŸ”„ Continuar Girando</button>
<button class="btn" id="btnGirarUnbound" onclick="girarAteUnbound()" style="display:none; background:#ff9900; color:black; font-weight:bold;">ðŸŽ¯ Girar atÃ© Unbound</button>
<button class="btn reset" onclick="resetar()">â™» Resetar</button>

<div id="resultado"></div>

<div id="animacao">
    <div class="spin"></div>
    <p>Abrindo...</p>
</div>

<script>
let bannerEscolhido = null;
let inventario = [];
let contagem = { "3â˜…": 0, "4â˜…": 0, "5â˜…": 0, "Unbound": 0, "Shiny": 0, "Shiny Unbound": 0 };
let gemasGastas = 0;
let pityCounter = 0; // Conta giros desde o Ãºltimo 5*

const raridades = {
    "3â˜…": 82.99,
    "4â˜…": 16.0,
    "5â˜…": 1.0,
    "Unbound": 0.01
};

const valorRaridade = {
    "Shiny Unbound": 6,
    "Unbound": 5,
    "Shiny": 4,
    "5â˜…": 3,
    "4â˜…": 2,
    "3â˜…": 1
};

const imagens = {
    "3â˜…": "https://i.imgur.com/YVZlVtQ.png",
    "4â˜…": "https://i.imgur.com/V8E1OQF.png",
    "5â˜…": "https://i.imgur.com/5bRFl8n.png",
    "Unbound-Kokushibo": "https://i.imgur.com/J5ZrDEn.png",
    "Unbound-Chrollo": "https://i.imgur.com/g5twbAv.png"
};

function escolherBanner(banner) {
    bannerEscolhido = banner;
    alert("Banner escolhido: " + banner);
    document.getElementById("btnGirarUnbound").style.display = "inline-block";
}

function summon(unboundNome, forcarCinco = false) {
    let roll = Math.random() * 100;
    let acumulado = 0;
    let raridadeEscolhida = "3â˜…";

    if (forcarCinco) {
        raridadeEscolhida = "5â˜…";
    } else {
        for (let raridade in raridades) {
            acumulado += raridades[raridade];
            if (roll <= acumulado) {
                raridadeEscolhida = raridade;
                break;
            }
        }
    }

    let shinyChance = Math.floor(Math.random() * 1000) === 0;
    if (shinyChance) {
        if (raridadeEscolhida === "Unbound") {
            return { nome: `Shiny Unbound - ${unboundNome}`, raridade: "Shiny Unbound", shiny: true };
        }
        return { nome: `Shiny ${raridadeEscolhida}`, raridade: "Shiny", shiny: true };
    }

    if (raridadeEscolhida === "Unbound") {
        return { nome: `Unbound - ${unboundNome}`, raridade: "Unbound" };
    }
    if (raridadeEscolhida === "5â˜…") {
        return { nome: `5â˜…`, raridade: "5â˜…" };
    }
    return { nome: `${raridadeEscolhida}`, raridade: raridadeEscolhida };
}

function iniciarSimulacao() {
    if (!bannerEscolhido) {
        alert("Escolha um banner primeiro!");
        return;
    }

    let gemas = parseInt(document.getElementById("gemas").value);
    if (gemas < 50) {
        alert("Digite pelo menos 50 gemas.");
        return;
    }

    document.getElementById("btnContinuar").style.display = "inline-block";

    document.getElementById("animacao").style.display = "flex";

    setTimeout(() => {
        simular(gemas);
        document.getElementById("animacao").style.display = "none";
    }, 1500);
}

function simular(totalGemas) {
    let unboundNome = (bannerEscolhido === "X") ? "Kokushibo" : "Chrollo";
    const CUSTO_SINGLE = 50;
    const CUSTO_MULTI = 450;

    while (totalGemas >= CUSTO_MULTI) {
        totalGemas -= CUSTO_MULTI;
        gemasGastas += CUSTO_MULTI;
        for (let i = 0; i < 10; i++) {
            let forcarCinco = false;
            pityCounter++;
            if (pityCounter >= 100) forcarCinco = true;

            let item = summon(unboundNome, forcarCinco);
            inventario.push(item);
            contagem[item.raridade]++;
            if (item.raridade === "5â˜…" || item.raridade === "Unbound" || item.raridade === "Shiny Unbound") pityCounter = 0;
        }
    }
    while (totalGemas >= CUSTO_SINGLE) {
        totalGemas -= CUSTO_SINGLE;
        gemasGastas += CUSTO_SINGLE;
        pityCounter++;
        let forcarCinco = pityCounter >= 100;
        let item = summon(unboundNome, forcarCinco);
        inventario.push(item);
        contagem[item.raridade]++;
        if (item.raridade === "5â˜…" || item.raridade === "Unbound" || item.raridade === "Shiny Unbound") pityCounter = 0;
    }

    atualizarContador();
    mostrarResultados();
}

function continuarGiros() {
    if (!bannerEscolhido) {
        alert("Escolha um banner primeiro!");
        return;
    }

    let gemas = parseInt(document.getElementById("gemas").value);
    if (gemas < 50) {
        alert("Digite pelo menos 50 gemas.");
        return;
    }

    document.getElementById("animacao").style.display = "flex";

    setTimeout(() => {
        simular(gemas);
        document.getElementById("animacao").style.display = "none";
    }, 1500);
}

async function girarAteUnbound() {
    if (!bannerEscolhido) {
        alert("Escolha um banner primeiro!");
        return;
    }
    document.getElementById("animacao").style.display = "flex";

    let unboundNome = (bannerEscolhido === "X") ? "Kokushibo" : "Chrollo";
    let gemasUsadasNesteLoop = 0;
    let encontrouUnbound = false;

    while (!encontrouUnbound) {
        pityCounter++;
        let forcarCinco = pityCounter >= 100;
        let item = summon(unboundNome, forcarCinco);
        inventario.push(item);
        contagem[item.raridade]++;
        gemasUsadasNesteLoop += 50;
        gemasGastas += 50;

        if (item.raridade === "5â˜…" || item.raridade === "Unbound" || item.raridade === "Shiny Unbound") pityCounter = 0;

        if (item.raridade === "Unbound" || item.raridade === "Shiny Unbound") {
            encontrouUnbound = true;
        }
    }

    atualizarContador();
    mostrarResultados();

    document.getElementById("animacao").style.display = "none";
    alert(`ðŸŽ‰ VocÃª conseguiu um Unbound apÃ³s gastar ${gemasUsadasNesteLoop} gemas!`);
}

function mostrarResultados() {
    let melhores = [...inventario].sort((a, b) => valorRaridade[b.raridade] - valorRaridade[a.raridade]);
    let top10 = melhores.slice(0, 10);

    let resultadoHTML = "<h3>Resultados</h3>";
    for (let rar in contagem) {
        resultadoHTML += `<p>${rar}: ${contagem[rar]}</p>`;
    }

    resultadoHTML += "<h4>Top 10:</h4>";
    top10.forEach(item => {
        let classe = "";
        if (item.raridade === "Shiny Unbound") classe = "Shiny";
        else if (item.raridade === "Unbound") classe = "Unbound";
        else if (item.raridade === "Shiny") classe = "Shiny";
        else if (item.raridade === "5â˜…") classe = "five";
        else if (item.raridade === "4â˜…") classe = "four";
        else if (item.raridade === "3â˜…") classe = "three";

        let imgSrc = imagens[item.raridade];
        if (item.raridade === "Unbound" || item.raridade === "Shiny Unbound") {
            imgSrc = imagens["Unbound-" + (bannerEscolhido === "X" ? "Kokushibo" : "Chrollo")];
        }
        resultadoHTML += `<div class="card ${classe}">
            <img src="${imgSrc}" alt="${item.nome}" />
            <p>${item.nome}</p>
        </div>`;
    });

    document.getElementById("resultado").innerHTML = resultadoHTML;
}

function atualizarContador() {
    document.getElementById("contadorGemas").textContent = gemasGastas;
}

function resetar() {
    inventario = [];
    contagem = { "3â˜…": 0, "4â˜…": 0, "5â˜…": 0, "Unbound": 0, "Shiny": 0, "Shiny Unbound": 0 };
    gemasGastas = 0;
    pityCounter = 0;
    bannerEscolhido = null;
    document.getElementById("resultado").innerHTML = "";
    document.getElementById("contadorGemas").textContent = "0";
    document.getElementById("btnContinuar").style.display = "none";
    document.getElementById("btnGirarUnbound").style.display = "none";
    alert("Resetado!");
}
</script>

</body>
</html>
