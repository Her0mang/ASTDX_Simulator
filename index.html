<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Summon Simulator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #1a1a1a;
        color: #fff;
        text-align: center;
        padding: 20px;
    }
    button {
        background: #ffcc00;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        cursor: pointer;
        font-weight: bold;
        border-radius: 8px;
    }
    button:hover {
        background: #ffdb4d;
    }
    #results {
        margin-top: 20px;
        padding: 15px;
        background: #262626;
        border-radius: 10px;
    }
    .rarity-3 { color: #b0c4de; }
    .rarity-4 { color: #9932cc; }
    .rarity-5 { color: gold; }
    .rarity-unbound { color: cyan; font-weight: bold; }
    #bannerSelected {
        margin-top: 10px;
        font-size: 18px;
        font-weight: bold;
        color: gold;
    }
</style>
</head>
<body>

<h1>Summon Simulator</h1>

<div>
    <button onclick="chooseBanner('X')">Banner X</button>
    <button onclick="chooseBanner('Y')">Banner Y</button>
</div>

<p id="bannerSelected">ðŸŽ¯ No banner selected</p>

<div>
    <input type="number" id="gemsInput" placeholder="Enter gems" min="50">
</div>

<div>
    <button onclick="summon()">Summon</button>
    <button onclick="summonUntilUnbound()">Summon Until Unbound</button>
    <button id="continueBtn" onclick="continueSummoning()" style="display:none;">Continue Summoning</button>
    <button onclick="resetSimulator()">Reset</button>
</div>

<div id="results"></div>

<script>
let bannerChosen = null;
let gems = 0;
let pityCounter = 0;
let counts = {
    "3â˜…": 0,
    "4â˜…": 0,
    "5â˜…": 0,
    "Unbound": 0,
    "Shiny 3â˜…": 0,
    "Shiny 4â˜…": 0,
    "Shiny 5â˜…": 0,
    "Shiny Unbound": 0
};
let lastSummonGems = 0;
let totalGemsSpent = 0;

function chooseBanner(banner) {
    bannerChosen = banner;
    document.getElementById("bannerSelected").innerText = "ðŸŽ¯ Banner chosen: " + banner;
}

function summonOnce() {
    pityCounter++;
    let roll = Math.random() * 100;
    let rarity;
    if (pityCounter >= 100) {
        rarity = "5â˜…";
        pityCounter = 0;
    } else if (roll < 0.01) rarity = "Unbound";
    else if (roll < 1.01) rarity = "5â˜…";
    else if (roll < 17.01) rarity = "4â˜…";
    else rarity = "3â˜…";

    if (rarity === "Unbound" || rarity === "5â˜…") pityCounter = 0;

    let shinyChance = 0.5; // %
    let isShiny = Math.random() * 100 < shinyChance;
    if (isShiny) {
        counts["Shiny " + rarity]++;
    }

    counts[rarity]++;
    return { rarity, isShiny };
}

function summon() {
    if (!bannerChosen) {
        alert("Please choose a banner first!");
        return;
    }
    let gemInput = parseInt(document.getElementById("gemsInput").value);
    if (isNaN(gemInput) || gemInput < 50) {
        alert("Enter a valid amount of gems (minimum 50).");
        return;
    }
    gems = gemInput;
    let cost = gems >= 450 ? 450 : 50;
    lastSummonGems = cost;
    gems -= cost;
    totalGemsSpent += cost;

    let pulls = cost === 450 ? 10 : 1;
    let results = [];
    for (let i = 0; i < pulls; i++) {
        results.push(summonOnce());
    }
    showResults(results);
    document.getElementById("continueBtn").style.display = "inline-block";
}

function continueSummoning() {
    if (!bannerChosen || lastSummonGems === 0) return;
    if (gems < lastSummonGems) {
        alert("Not enough gems to continue.");
        return;
    }
    gems -= lastSummonGems;
    totalGemsSpent += lastSummonGems;

    let pulls = lastSummonGems === 450 ? 10 : 1;
    let results = [];
    for (let i = 0; i < pulls; i++) {
        results.push(summonOnce());
    }
    showResults(results);
}

function summonUntilUnbound() {
    if (!bannerChosen) {
        alert("Please choose a banner first!");
        return;
    }
    let gemInput = parseInt(document.getElementById("gemsInput").value);
    if (isNaN(gemInput) || gemInput < 50) {
        alert("Enter a valid amount of gems (minimum 50).");
        return;
    }
    gems = gemInput;
    let results = [];
    while (gems >= 50) {
        let cost = gems >= 450 ? 450 : 50;
        gems -= cost;
        totalGemsSpent += cost;

        let pulls = cost === 450 ? 10 : 1;
        for (let i = 0; i < pulls; i++) {
            let result = summonOnce();
            results.push(result);
            if (result.rarity === "Unbound") {
                showResults(results);
                document.getElementById("continueBtn").style.display = "inline-block";
                return;
            }
        }
    }
    showResults(results);
}

function resetSimulator() {
    bannerChosen = null;
    gems = 0;
    pityCounter = 0;
    lastSummonGems = 0;
    totalGemsSpent = 0;
    for (let key in counts) counts[key] = 0;
    document.getElementById("bannerSelected").innerText = "ðŸŽ¯ No banner selected";
    document.getElementById("results").innerHTML = "";
    document.getElementById("continueBtn").style.display = "none";
}

function showResults(results) {
    let html = `<p>ðŸ’Ž Gems left: ${gems} | ðŸ’° Total spent: ${totalGemsSpent}</p>`;
    html += "<ul>";
    results.forEach(r => {
        let cssClass = r.rarity === "3â˜…" ? "rarity-3" :
                       r.rarity === "4â˜…" ? "rarity-4" :
                       r.rarity === "5â˜…" ? "rarity-5" : "rarity-unbound";
        html += `<li class="${cssClass}">${r.rarity}${r.isShiny ? " âœ¨ Shiny" : ""}</li>`;
    });
    html += "</ul><hr><h3>ðŸ“Š Statistics</h3><ul>";
    for (let key in counts) {
        html += `<li>${key}: ${counts[key]}</li>`;
    }
    html += "</ul>";
    document.getElementById("results").innerHTML = html;
}
</script>

</body>
</html>
